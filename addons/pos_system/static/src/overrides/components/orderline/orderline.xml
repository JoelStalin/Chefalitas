<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-name="pos_system.ReceiptHeader" t-inherit="point_of_sale.ReceiptHeader" t-inherit-mode="extension">
        <xpath expr="//div[hasclass('cashier')]" position="before">
            <div t-if="props.data.company and props.data.company.partner_id and props.data.company_address"
                class="receipt-address">
                <t t-esc="props.data.company_address"/>
            </div>
        </xpath>

        <xpath expr="//div[hasclass('cashier')]" position="after">
            <div>--------------------------------</div>
            <div t-if="props.data.updated_partner and props.data.updated_partner.name" t-esc="props.data.updated_partner.name"/>
            <div t-if="props.data.updated_partner and props.data.updated_partner.vat" t-esc="props.data.updated_partner.vat"/>
            <div t-if="props.data.updated_partner and props.data.updated_partner.address"
                class="receipt-address">
                <t t-esc="props.data.updated_partner.address"/>
            </div>
        </xpath>
        <xpath expr="//span[hasclass('tracking-number')]" position="replace">
            <t t-if="props.data.invoice_name">
                <div>--------------------------------</div>
                <span class="tracking-number fs-6" t-if="props.data.l10n_latam_document_type_report_name" t-esc="props.data.l10n_latam_document_type_report_name" />
                <br />
                <span class="tracking-number fs-3" t-if="props.data.invoice_name" t-esc="props.data.invoice_name" />
                <div>--------------------------------</div>
            </t>
        </xpath>
    </t> 

    <t t-name="pos_system.OrderReceipt" t-inherit="point_of_sale.OrderReceipt" t-inherit-mode="extension">
      <xpath expr="//div[contains(@class,'pos-receipt-order-data')]/p[normalize-space()='Powered by Odoo']" position="replace"/>
    </t>


    <t t-name="pos_system.OrderReceipt" t-inherit="point_of_sale.OrderReceipt" t-inherit-mode="extension">
        <xpath expr="//div[hasclass('pos-receipt')]//OrderWidget" position="replace">
            
                <CustomOrderWidget
                    t-if="props.data.orderlines?.length"
                    lines="props.data.orderlines"
                    generalNote="props.data.generalNote or ''"
                    screenName="props.data.screenName"
                    t-slot-scope="scope" 
                    />
        </xpath>

         <xpath expr="//div[hasclass('receipt-total')]" position="replace">
                <div class="pos-receipt-amount receipt-total">
                    <b>
                        <t t-out="props.data.label_total"/>
                        <span t-esc="props.formatCurrency(taxTotals.order_sign * taxTotals.order_total)" class="pos-receipt-right-align"/>
                    </b>
                </div>
        </xpath>

        
    </t>

     <t t-name="pos_system.OrderReceiptLoyalty"
        t-inherit="point_of_sale.OrderReceipt"
        t-inherit-mode="extension">

        <!-- Apaga el bloque que muestra el cliente -->
        <xpath expr="//div[hasclass('pos-receipt')]//div[hasclass('before-footer')]/t[@t-if='props.data.partner']"
            position="attributes">
        <attribute name="t-if">0</attribute>
        </xpath>
  </t>

</templates>